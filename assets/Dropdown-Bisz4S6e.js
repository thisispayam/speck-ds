import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as l}from"./index-qdalL59a.js";import{I as W}from"./Icon-BYR71yhe.js";const x=l.forwardRef(({options:n,value:d,onChange:m,placeholder:g="Select an option",size:N="md",disabled:o=!1,error:v=!1,errorMessage:y,label:h,fullWidth:D=!1,className:I="",id:V,name:j,"aria-label":q},E)=>{const[s,c]=l.useState(!1),[t,i]=l.useState(-1),w=l.useRef(null),b=l.useRef(null),p=n.find(e=>e.value===d);l.useEffect(()=>{const e=r=>{w.current&&!w.current.contains(r.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),l.useEffect(()=>{if(s){const e=n.findIndex(r=>r.value===d);i(e>=0?e:0)}else i(-1)},[s,n,d]),l.useEffect(()=>{if(s&&b.current&&t>=0){const e=b.current.children[t];e&&e.scrollIntoView({block:"nearest"})}},[s,t]);const L=l.useCallback(()=>{o||c(e=>!e)},[o]),_=l.useCallback(e=>{e.disabled||(m==null||m(e.value,e),c(!1))},[m]),O=l.useCallback(e=>{if(!o)switch(e.key){case"Enter":case" ":if(e.preventDefault(),s&&t>=0){const r=n[t];r&&!r.disabled&&_(r)}else c(!0);break;case"Escape":c(!1);break;case"ArrowDown":e.preventDefault(),s?i(r=>{const f=r+1;return f<n.length?f:r}):c(!0);break;case"ArrowUp":e.preventDefault(),s&&i(r=>{const f=r-1;return f>=0?f:r});break;case"Home":s&&(e.preventDefault(),i(0));break;case"End":s&&(e.preventDefault(),i(n.length-1));break}},[o,s,t,n,_]),R=["ds-dropdown",`ds-dropdown--${N}`,D?"ds-dropdown--full-width":"",o?"ds-dropdown--disabled":"",v?"ds-dropdown--error":"",s?"ds-dropdown--open":"",I].filter(Boolean).join(" "),u=V||`dropdown-${Math.random().toString(36).substr(2,9)}`,k=`${u}-list`,S=q||(h?void 0:g);return a.jsxs("div",{className:R,ref:w,children:[h&&a.jsx("label",{className:"ds-dropdown__label",id:`${u}-label`,htmlFor:u,children:h}),a.jsxs("div",{ref:E,className:"ds-dropdown__trigger",id:u,role:"combobox","aria-expanded":s,"aria-haspopup":"listbox","aria-controls":k,"aria-disabled":o,"aria-label":S,"aria-labelledby":h?`${u}-label`:void 0,tabIndex:o?-1:0,onClick:L,onKeyDown:O,children:[a.jsx("span",{className:`ds-dropdown__value ${p?"":"ds-dropdown__placeholder"}`,children:p?a.jsxs(a.Fragment,{children:[p.icon&&a.jsx("span",{className:"ds-dropdown__option-icon",children:p.icon}),p.label]}):g}),a.jsx("span",{className:"ds-dropdown__arrow","aria-hidden":"true",children:a.jsx(W,{name:s?"chevron-up":"chevron-down",size:12})})]}),a.jsx("ul",{ref:b,className:"ds-dropdown__list",id:k,role:"listbox","aria-labelledby":u,hidden:!s,children:n.map((e,r)=>a.jsxs("li",{className:["ds-dropdown__option",e.disabled?"ds-dropdown__option--disabled":"",e.value===d?"ds-dropdown__option--selected":"",r===t?"ds-dropdown__option--highlighted":""].filter(Boolean).join(" "),role:"option","aria-selected":e.value===d,"aria-disabled":e.disabled,onClick:()=>_(e),onMouseEnter:()=>i(r),children:[e.icon&&a.jsx("span",{className:"ds-dropdown__option-icon",children:e.icon}),a.jsx("span",{className:"ds-dropdown__option-label",children:e.label}),e.value===d&&a.jsx("span",{className:"ds-dropdown__check","aria-hidden":"true",children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M2 6L4.5 8.5L10 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]},e.value))}),v&&y&&a.jsx("p",{className:"ds-dropdown__error-message",children:y}),j&&a.jsx("input",{type:"hidden",name:j,value:d||""})]})});x.displayName="Dropdown";try{x.displayName="Dropdown",x.__docgenInfo={description:"Dropdown component for selecting from a list of options",displayName:"Dropdown",props:{options:{defaultValue:null,description:"The options to display in the dropdown",name:"options",required:!0,type:{name:"DropdownOption[]"}},value:{defaultValue:null,description:"The currently selected value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when an option is selected",name:"onChange",required:!1,type:{name:"((value: string, option: DropdownOption) => void)"}},placeholder:{defaultValue:{value:"Select an option"},description:"Placeholder text when no option is selected",name:"placeholder",required:!1,type:{name:"string"}},size:{defaultValue:{value:"md"},description:"The size of the dropdown",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether the dropdown is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the dropdown has an error state",name:"error",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"Error message to display",name:"errorMessage",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label for the dropdown",name:"label",required:!1,type:{name:"string"}},fullWidth:{defaultValue:{value:"false"},description:"Whether the dropdown should take full width",name:"fullWidth",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"Additional class names",name:"className",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"ID for the dropdown (used for accessibility)",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for form submission",name:"name",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"Accessible label for screen readers (overrides default)",name:"aria-label",required:!1,type:{name:"string"}}}}}catch{}export{x as D};
