import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./index-qdalL59a.js";import{I as W}from"./Icon-BYR71yhe.js";const x=r.forwardRef(({options:d,value:l,onChange:f,placeholder:g="Select an option",size:N="md",disabled:o=!1,error:y=!1,errorMessage:v,label:m,fullWidth:D=!1,className:I="",id:V,name:j,"aria-label":q},E)=>{const[n,c]=r.useState(!1),[t,i]=r.useState(-1),h=r.useRef(null),w=r.useRef(null),u=d.find(e=>e.value===l);r.useEffect(()=>{const e=s=>{h.current&&!h.current.contains(s.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.useEffect(()=>{if(n){const e=d.findIndex(s=>s.value===l);i(e>=0?e:0)}else i(-1)},[n,d,l]),r.useEffect(()=>{if(n&&w.current&&t>=0){const e=w.current.children[t];e&&e.scrollIntoView({block:"nearest"})}},[n,t]);const L=r.useCallback(()=>{o||c(e=>!e)},[o]),b=r.useCallback(e=>{e.disabled||(f==null||f(e.value,e),c(!1))},[f]),O=r.useCallback(e=>{if(!o)switch(e.key){case"Enter":case" ":if(e.preventDefault(),n&&t>=0){const s=d[t];s&&!s.disabled&&b(s)}else c(!0);break;case"Escape":c(!1);break;case"ArrowDown":e.preventDefault(),n?i(s=>{const p=s+1;return p<d.length?p:s}):c(!0);break;case"ArrowUp":e.preventDefault(),n&&i(s=>{const p=s-1;return p>=0?p:s});break;case"Home":n&&(e.preventDefault(),i(0));break;case"End":n&&(e.preventDefault(),i(d.length-1));break}},[o,n,t,d,b]),R=["ds-dropdown",`ds-dropdown--${N}`,D?"ds-dropdown--full-width":"",o?"ds-dropdown--disabled":"",y?"ds-dropdown--error":"",n?"ds-dropdown--open":"",I].filter(Boolean).join(" "),_=V||`dropdown-${Math.random().toString(36).substr(2,9)}`,k=`${_}-list`,S=q||m||g;return a.jsxs("div",{className:R,ref:h,children:[a.jsxs("div",{ref:E,className:"ds-dropdown__trigger",id:_,role:"combobox","aria-expanded":n,"aria-haspopup":"listbox","aria-controls":k,"aria-disabled":o,"aria-label":S,tabIndex:o?-1:0,onClick:L,onKeyDown:O,children:[a.jsxs("span",{className:"ds-dropdown__content",children:[m&&a.jsx("span",{className:"ds-dropdown__label-inner",children:m}),a.jsx("span",{className:`ds-dropdown__value ${u?"":"ds-dropdown__placeholder"}`,children:u?a.jsxs(a.Fragment,{children:[u.icon&&a.jsx("span",{className:"ds-dropdown__option-icon",children:u.icon}),u.label]}):g})]}),a.jsx("span",{className:"ds-dropdown__arrow","aria-hidden":"true",children:a.jsx(W,{name:n?"chevron-up":"chevron-down",size:12})})]}),a.jsx("ul",{ref:w,className:"ds-dropdown__list",id:k,role:"listbox","aria-labelledby":_,hidden:!n,children:d.map((e,s)=>a.jsxs("li",{className:["ds-dropdown__option",e.disabled?"ds-dropdown__option--disabled":"",e.value===l?"ds-dropdown__option--selected":"",s===t?"ds-dropdown__option--highlighted":""].filter(Boolean).join(" "),role:"option","aria-selected":e.value===l,"aria-disabled":e.disabled,onClick:()=>b(e),onMouseEnter:()=>i(s),children:[e.icon&&a.jsx("span",{className:"ds-dropdown__option-icon",children:e.icon}),a.jsx("span",{className:"ds-dropdown__option-label",children:e.label}),e.value===l&&a.jsx("span",{className:"ds-dropdown__check","aria-hidden":"true",children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M2 6L4.5 8.5L10 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]},e.value))}),y&&v&&a.jsx("p",{className:"ds-dropdown__error-message",children:v}),j&&a.jsx("input",{type:"hidden",name:j,value:l||""})]})});x.displayName="Dropdown";try{x.displayName="Dropdown",x.__docgenInfo={description:"Dropdown component for selecting from a list of options",displayName:"Dropdown",props:{options:{defaultValue:null,description:"The options to display in the dropdown",name:"options",required:!0,type:{name:"DropdownOption[]"}},value:{defaultValue:null,description:"The currently selected value",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when an option is selected",name:"onChange",required:!1,type:{name:"((value: string, option: DropdownOption) => void)"}},placeholder:{defaultValue:{value:"Select an option"},description:"Placeholder text when no option is selected",name:"placeholder",required:!1,type:{name:"string"}},size:{defaultValue:{value:"md"},description:"The size of the dropdown",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether the dropdown is disabled",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:"false"},description:"Whether the dropdown has an error state",name:"error",required:!1,type:{name:"boolean"}},errorMessage:{defaultValue:null,description:"Error message to display",name:"errorMessage",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label for the dropdown",name:"label",required:!1,type:{name:"string"}},fullWidth:{defaultValue:{value:"false"},description:"Whether the dropdown should take full width",name:"fullWidth",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"Additional class names",name:"className",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"ID for the dropdown (used for accessibility)",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name attribute for form submission",name:"name",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"Accessible label for screen readers (overrides default)",name:"aria-label",required:!1,type:{name:"string"}}}}}catch{}export{x as D};
